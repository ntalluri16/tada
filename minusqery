#!/bin/bash

# ======== Configuration ========
ACCESS_TOKEN="YOUR_ACCESS_TOKEN"
GROUP_ID="YOUR_GROUP_ID"
DATASET_ID="YOUR_DATASET_ID"
TOP=1

# ======== API Request ========
RESPONSE=$(curl -s -X GET \
  -H "Authorization: Bearer $ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  "https://api.powerbi.com/v1.0/myorg/groups/$GROUP_ID/datasets/$DATASET_ID/refreshes?\$top=$TOP")

# ======== Output ========
echo "=== Power BI Dataset Refresh Status ==="
echo "$RESPONSE" | jq '.value[] | {status, startTime, endTime, serviceExceptionJson}'

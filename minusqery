#!/bin/bash

# Time threshold in seconds (15 minutes = 900 seconds)
threshold=900
start_time=$SECONDS

# Directory to check for files
directory="/path/to/directory"

# Your list of files to check
files=("file1" "file2" "file3")

# Loop to check for files
for file in "${files[@]}"; do
    while true; do
        if [[ -f "$directory/$file" ]]; then
            echo "$file exists, processing..."
            # Add your processing logic here
            break
        else
            # Check if threshold time has been exceeded
            elapsed_time=$(($SECONDS - $start_time))
            if (( elapsed_time > threshold )); then
                echo "Threshold of 15 minutes exceeded. Exiting."
                exit 1
            fi
            
            echo "$file not found, waiting..."
            sleep 10  # Wait for 10 seconds before retrying
        fi
    done
done

echo "All files processed successfully!"
